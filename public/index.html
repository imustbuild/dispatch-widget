<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Urgent Medical Care - Insurance Accepted | DispatchHealth</title>
    <style>
      html {
        font-size:  10px;
      }
      body {
        -webkit-font-smoothing: antialiased;
        font-size: 1.8rem;
        font-family: "Open Sans", Arial, Helvetica, sans-serif;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }
      #app {
        width: 100%;
      }
      .Page {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .Page-header-bar {
        display: flex;
        align-items: center;
        background: #fff;
        height: 100px;
        padding: 0 54px;
        box-shadow: 0 5px 20px 0 rgb(0 0 0 / 5%);
      }
      .Page-header-bar-logo {
        width: 230px;
      }
      .Page-header-navigation {
        flex-grow: 1;
      }
      .Page-content {
        display: flex;
        flex-direction: column;
        background: #f3f3f4;
        flex-grow: 1;
      }
      .Page-content-wrapper {
        flex-grow: 1;
        padding-left: calc(50% - 620px);
        padding-right: calc(50% - 620px);
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>
    <link href="//fonts.googleapis.com/css?family=Open Sans:300,400,700|Bree Serif:300,400,700&amp;display=swap" as="style" rel="stylesheet" onload="this.rel=&quot;stylesheet&quot;" crossorigin="anonymous">
  </head>
  <body>
    <div class="Page">
      <div class="Page-header-bar">
        <div class="Page-header-bar-logo">
          <a aria-label="home page" href="/">
            <img
              class="PageLogo-image"
              src="/assets/images/dh-logo-inline.svg"
              alt="DispatchHealth"
            />
          </a>
        </div>
        <div class="Page-header-navigation">
          <nav class="Navigation"></nav>
        </div>
      </div>
      <div class="Page-content">
        <div class="Page-content-wrapper">
          <div id="app">


            <!-- START WIDGET COPY -->
            <style>
              .Widget {
                width: 100%;
                max-width: 640px;
                margin: auto;
                text-align: center;
                padding: 16px;
                font-size: 28px;
                line-height: 1.5;
              }
              .Widget-step {
                margin: 1em 0;
              }
              .Widget-step + .Widget-step {
                margin-top: 2em;
              }
              .Widget-step-title {
                font-family: "Bree Serif", serif;
                margin-bottom: .5em;
              }
              .Widget-step-title span {
                display: inline-block;
              }
              .Widget-step-subtitle {
                font-family: "Bree Serif", serif;
                font-size: .75em;
                margin: .5em 0 0;
              }
              .Widget-step-title + .Widget-step-subtitle {
                margin: -.5em 0 2em;
                font-family: "Open Sans", Arial, Helvetica, sans-serif;
                font-size: .6em;
              }
              *[class^="Widget-button"] {
                width: 100%;
                border: 1px solid transparent;
                background: #0088D8;
                color: #fff;
                border-radius: 4px;
                padding: .5em 1em;
                font-family: "Open Sans", Arial, Helvetica, sans-serif;
                font-weight: bold;
                font-size: .5em;
                line-height: 1.4;
                text-align: inherit;
              }
              *[class^="Widget-button"] span {
                display: inline-block;
              }
              *[class^="Widget-button"]:disabled {
                background: #e0e0e0;
                color: #b5b5b5;
              }
              *[class^="Widget-button"]:not(:disabled):hover {
                background: #0058A8;
                cursor: pointer;
              }
              *[class$="--secondary"] {
                background: transparent;
                color: #0088D8;
              }
              *[class$="--secondary"]:not(:disabled):hover {
                background: transparent;
                color: #0088D8;
                text-decoration: underline;
                cursor: pointer;
              }
              *[class$="--continue"] {
                display: flex;
                align-items: center;
                justify-content: center;
                width: fit-content;
                margin: auto;
                background: #0088D8;
                color: #fff;
                border: 1px solid transparent;
              }
              *[class$="--continue"] svg {
                margin-left: .5em;
                margin-bottom:  -2px;
              }
              *[class$="--continue"]:disabled {
                background: #e0e0e0;
                color: #b5b5b5;
              }
              *[class$="--continue"]:not(:disabled):hover {
                /*background: #0088D8;*/
                color: #fff;
                cursor: pointer;
              }
              *[class^="Widget-button"].is-selected,
              *[class^="Widget-button"].is-selected:hover {
                background: orange;
              }
              .Widget-search {
                margin-bottom: 1em;
              }
              .Widget-search-control {
                display: flex;
                align-items: center;
                border-bottom: 1px solid orange;
              }
              .Widget-search-icon {
                width: 20px;
                height: 20px;
                color: orange;
              }
              .Widget-search-input {
                flex-grow: 1;
                font-family: "Open Sans", Arial, Helvetica, sans-serif;
                font-size: 16px;
                line-height: 2;
                padding: .5em 1em;
                border: none;
                background: transparent;
              }
              .Widget-search-results {
                position: relative;
                z-index: 100;
                text-align: left;
              }
              .Widget-search-submit {
                width: auto;
              }
              .Widget-suggestions {
                position: absolute;
                left: 0;
                right: 0;
                background: #f3f3f4;
              }
              *[class^="Widget-list"] {
                list-style: none;
                padding: 0;
                margin: 0;
              }
              *[class$="--2col"] {
                columns: 100px 2;
                column-gap: 10px;
              }
              .Widget-list-item {
                margin: 0;
                padding: 0;
              }

              .Widget-reasons {
                position: relative;
              }
              .Widget-reasons-overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: #f3f3f4;
                opacity: .9;
              }

              .Widget-schedule {
                display: grid;
                grid-template-columns: auto auto;
                grid-gap: 10px;
                margin-top: -.5em;
              }

              @media ( max-width: 767px ) {
                *[class$="--2col"] {
                  columns: 100px 1;
                }
                .Widget-schedule {
                  display: block;
                }
              }
            </style>
            <section class="Widget" x-data="widget" x-init="getReasons()" x-show="!loading">
              <section class="Widget-step">
                <div class="Widget-step-title">
                  When is the preferred <span>appointment time?</span>
                </div>
                <div class="Widget-step-subtitle">Weâ€™ll hold your time for the next 20 minutes</div>
                <div class="Widget-schedule">
                  <div class="Widget-schedule-day">
                    <div class="Widget-step-subtitle">Today (<span x-text="today()"></span>)</div>
                    <ul class="Widget-list">
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Today'&&time==='Morning'}" type="button" x-on:click="setDate('Today','Morning')" x-bind:disabled="now.getHours() > 9">Morning: 7am to Noon</button>
                      </li>
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Today'&&time==='Afternoon'}" type="button" x-on:click="setDate('Today','Afternoon')" x-bind:disabled="now.getHours() > 12">Afternoon: Noon to 5pm</button>
                      </li>
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Today'&&time==='Evening'}" type="button" x-on:click="setDate('Today','Evening')" x-bind:disabled="now.getHours() > 15">Evening: 5pm to 10pm</button>
                      </li>
                    </ul>
                  </div>
                  <div class="Widget-schedule-day">
                    <div class="Widget-step-subtitle">Tomorrow (<span x-text="tomorrow()"></span>)</div>
                    <ul class="Widget-list">
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Tomorrow'&&time==='Morning'}" type="button" x-on:click="setDate('Tomorrow','Morning')">Morning: 7am to Noon</button>
                      </li>
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Tomorrow'&&time==='Afternoon'}" type="button" x-on:click="setDate('Tomorrow','Afternoon')">Afternoon: Noon to 5pm</button>
                      </li>
                      <li class="Widget-list-item">
                        <button class="Widget-button" :class="{'is-selected':date==='Tomorrow'&&time==='Evening'}" type="button" x-on:click="setDate('Tomorrow','Evening')">Evening: 5pm to 10pm</button>
                      </li>
                    </ul>
                  </div>
                </div>
              </section>
              <section class="Widget-step">
                <div class="Widget-step-title">
                  What is the reason for <span>this visit?</span>
                </div>
                <div class="Widget-search">
                  <div class="Widget-search-control">
                    <svg class="Widget-search-icon" width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M13.846 8.462c0-1.483-.527-2.75-1.58-3.805-1.054-1.053-2.322-1.58-3.804-1.58-1.483 0-2.75.527-3.805 1.58-1.053 1.054-1.58 2.322-1.58 3.805 0 1.482.527 2.75 1.58 3.804 1.054 1.053 2.322 1.58 3.805 1.58 1.482 0 2.75-.527 3.804-1.58 1.053-1.054 1.58-2.322 1.58-3.804zm6.154 10c0 .416-.152.777-.457 1.08-.304.306-.665.458-1.08.458-.434 0-.795-.152-1.083-.457l-4.123-4.11c-1.434.993-3.033 1.49-4.795 1.49-1.146 0-2.242-.222-3.288-.667-1.045-.445-1.947-1.046-2.704-1.803-.757-.757-1.358-1.66-1.803-2.704C.222 10.702 0 9.606 0 8.46 0 7.316.222 6.22.667 5.174 1.112 4.13 1.713 3.227 2.47 2.47c.757-.757 1.66-1.358 2.704-1.803C6.22.222 7.316 0 8.462 0c1.145 0 2.24.222 3.287.667 1.044.445 1.946 1.046 2.703 1.803.757.757 1.358 1.66 1.803 2.704.445 1.046.667 2.142.667 3.288 0 1.762-.497 3.36-1.49 4.795l4.122 4.123c.297.296.445.657.445 1.082z" fill="currentColor" fill-rule="evenodd"/>
                    </svg>
                    <input class="Widget-search-input" type="text" placeholder="Search for a reason" x-model="input" @keyup.debounce.200ms="getSuggestions($event.target.value)" @keyup.enter="setReason($event.target.value)" @focus="$event.target.select()" />
                  </div>
                  <div class="Widget-search-results">
                    <div class="Widget-suggestions" x-show="suggestions.length > 0">
                      <ul class="Widget-list">
                        <template x-for="item in suggestions" :key="item.value">
                          <li class="Widget-list-item">
                            <template x-if="!item.other">
                              <button class="Widget-button" type="button" x-on:click="setReason(item.label,item.value)" x-text="item.label"></button>
                            </template>
                            <template x-if="item.other">
                              <button class="Widget-button" type="button" x-on:click="setReason(input,input)">
                                We didn't find a match, would you like to submit your reason?
                              </button>
                            </template>
                          </li>
                        </template>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="Widget-reasons">
                  <div class="Widget-step-subtitle">or choose a reason</div>
                  <ul class="Widget-list--2col">
                    <template x-for="item in reasons" :key="item.value">
                      <template x-if="item.primary">
                        <li class="Widget-list-item">
                          <button class="Widget-button"  :class="{'is-selected':reason===item.value}" type="button" x-on:click="setReason(item.label,item.value)" x-text="item.label"></button>
                        </li>
                      </template>
                    </template>
                  </ul>
                  <button class="Widget-button--secondary" type="button" x-show="!more" x-on:click="more=!more">
                    More Reasons
                  </button>
                  <div x-show="more">
                    <!-- <div class="Widget-step-subtitle">More Reasons</div> -->
                    <ul class="Widget-list--2col">
                      <template x-for="item in reasons" :key="item.value">
                        <template x-if="!item.primary">
                          <li class="Widget-list-item">
                            <button class="Widget-button"  :class="{'is-selected':reason===item.value}" type="button" x-on:click="setReason(item.label,item.value)" x-text="item.label"></button>
                          </li>
                        </template>
                      </template>
                    </ul>
                    <button class="Widget-button--secondary" type="button" x-on:click="more=!more">
                      Fewer Reasons
                    </button>
                  </div>
                  <div class="Widget-reasons-overlay" x-show="suggestions.length>0"></div>
                </div>
              </section>
              <section>
                <button class="Widget-button--continue" type="button" x-bind:disabled="!isValid()" x-on:click="submit()">
                  <span>Continue</span>
                </button>
              </section>
            </section>
            <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
            <script>
              document.addEventListener('alpine:init', () => {
                Alpine.data('widget', () => ({
                  loading: false,
                  input: "",
                  results: true,
                  suggestions: [],
                  more: false,
                  reason: "",
                  date: "",
                  time: "",
                  reasons: [],
                  now: new Date(),
                  today: function(){
                    const today = new Date();
                    return `${today.getMonth() + 1}/${today.getDate()}`;
                  },
                  tomorrow: function(){
                    const today = new Date();
                    const tomorrow =  new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return `${today.getMonth() + 1}/${tomorrow.getDate()}`;
                  },
                  getReasons: function(){
                    this.loading = true;
                    fetch('https://dispatchhealth-widget.netlify.app/api/1/reasons')
                      .then(response => response.json())
                      .then(data => {
                        this.reasons = data.sort((a, b) => (a.label > b.label ? 1 : a.label.toLowerCase() < b.label.toLowerCase() ? -1 : 0));
                        this.loading = false;
                      });
                  },
                  getSuggestions: function(value){
                    const match = value.trim();
                    const input = this.input.trim();
                    const reason = this.reason.trim()
                    if ( input !== reason && input !== "") {
                      const other = [{ other: true }];
                      const suggestions = this.reasons.filter(obj => obj.label.toLowerCase().indexOf(match) > -1).slice(0,5);
                      this.suggestions = suggestions.length > 0 ? suggestions : other;
                      this.reason = "";
                      console.log(`Getting suggestions for ${value}`);
                    } else {
                      this.suggestions = [];
                    }
                  },
                  setReason: function(label,value){
                    this.input = label;
                    this.reason = value;
                    this.suggestions = [];
                    console.log(`Setting the reason to ${value}`);
                  },
                  setDate: function(date,time){
                    this.date = date;
                    this.time = time;
                    location.href = `https://request.dispatchhealth.com/?condition=${c}&date=${d}&time=${t}`;
                    console.log(`Setting the data & time to ${date} ${time}`);
                  },
                  isValid: function(){
                    return (this.reason !== "" && this.date !== "" && this.time !== "");
                  },
                  submit: function(){
                    const c = encodeURIComponent(this.reason.toLowerCase());
                    const d = encodeURIComponent(this.date.toLowerCase());
                    const t = encodeURIComponent(this.time.toLowerCase());
                    location.href = `https://request.dispatchhealth.com/?condition=${c}&date=${d}&time=${t}`;
                  }
                }));
              });
            </script>

            <!-- END WIDGET COPY -->



          </div>
        </div>
      </div>
    </div>
  </body>
</html>
